<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Tool</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        .container {
            display: flex;
            width: 100%;
            height: 100%;
        }
        .tool, .result {
            padding: 10px;
            overflow-y: auto;
            position: relative;
        }
        .tool {
            width: 60%;
            background-color: #f0f8ff;
            border-right: 1px solid #ddd;
        }
        .result {
            width: 40%;
            background-color: #fff;
        }
        h1, h2 {
            margin: 0 0 10px 0;
        }
        h1 {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }
        h2 {
            font-size: 16px;
            font-weight: normal;
            color: #555;
        }
        .question {
            background-color: #fafafa;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        .date-time-input {
            display: inline-block;
            margin-left: 10px;
        }
        .date-time-input input {
            margin-left: 5px;
            font-size: 14px;
        }
        .question input[type="checkbox"], 
        .question input[type="radio"] {
            margin-right: 5px;
        }
        .reset-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        .reset-button:hover {
            background-color: #0056b3;
        }
        .section-divider {
            border-top: 1px solid #ddd;
            margin: 10px 0;
        }
        .hidden {
            display: none;
        }
        .disabled {
            color: #aaa;
            cursor: not-allowed;
        }
        .disabled input {
            cursor: not-allowed;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="tool">
        <h1>พิจารณา</h1>
        <button class="reset-button" onclick="resetForm()">Reset</button>
        <div class="question">
            <h2>1. ระบุวันที่และเวลา</h2>
            <div class="date-time-input">
                <input type="date" id="date" oninput="updateResult()" />
                <input type="time" id="time" oninput="updateResult()" />
            </div>
        </div>
        <div class="question">
            <h2>2. เหตุการณ์ที่เกิดขึ้น(อาจ)ส่งผลกระทบต่อบริการ</h2>
            <label><input type="checkbox" id="systemA" onchange="updateResult()" /> ระบบ A</label>
            <label><input type="checkbox" id="systemB" onchange="updateResult()" /> ระบบ B</label>
            <label><input type="checkbox" id="systemC" onchange="updateResult()" /> ระบบ C</label>
            <label><input type="checkbox" id="systemD" onchange="updateResult()" /> ระบบ D</label>
            <label><input type="checkbox" id="bothAB" onchange="updateResult()" /> ทั้งข้อ ก และ ข</label>
        </div>
        <div class="question hidden" id="question3">
            <h2>3. บริการที่ขัดข้องเป็นบริการระบบ CNS ซึ่ง</h2>
            <div class="question">
                <h2>3.1 พิจารณาลักษณะเหตุตามตาราง Mandatory แล้ว <a href="#" onclick="showMoreInfo()">แสดงข้อมูลเพิ่มเติม</a> และพบว่า เป็นเหตุการณ์ตามตารางที่กำหนด</h2>
                <label><input type="radio" name="q3-1" value="ใช่" onchange="updateResult()" /> ก. ใช่</label>
                <label><input type="radio" name="q3-1" value="ไม่ใช่/ไม่ค่อยตรง" onchange="updateResult()" /> ข. ไม่ใช่/ไม่ค่อยตรง</label>
            </div>
            <div class="question hidden" id="question3-2">
                <h2>3.2 เกิดจาก "เหตุที่ระบบ/อุปกรณ์ขัดข้องโดยทันที ไม่ได้วางแผน และ ส่งผลให้บริการหยุดชะงักหรือขาดหายไป"</h2>
                <label><input type="radio" name="q3-2" value="ใช่" onchange="updateResult()" /> ก. ใช่</label>
                <label><input type="radio" name="q3-2" value="ไม่ใช่" onchange="updateResult()" /> ข. ไม่ใช่</label>
                <label><input type="radio" name="q3-2" value="ยังไม่ทราบ/ไม่แน่ใจ" onchange="updateResult()" /> ค. ยังไม่ทราบ/ไม่แน่ใจ</label>
            </div>
            <div class="question hidden" id="question3-3">
                <h2>3.3 เหตุการณ์นี้มีลักษณะตามกลุ่มนี้ ข้อใด ข้อหนึ่งหรือไม่</h2>
                <ul>
                    <li>ก. เหตุการณ์นี้เกิดขึ้นซ้ำในลักษณะเดิม โดยเสียหรือขัดข้อง ติดๆดับๆ ซึ่งอาจมีสาเหตุหลักหรือย่อยคล้ายเดิม รวมถึง ยังหาสาเหตุไม่พบ</li>
                    <li>ข. ส่งผลกระทบต่อผู้รับบริการภายนอกหรือไม่</li>
                    <li>ค. ส่งผลกระทบต่อ ATC และอาจทำให้เกิดอุบัติการณ์รุนแรง</li>
                    <li>ง. เป็นเหตุการณ์ที่พิจารณาแล้วว่า ควรนำส่งรายงานแก่ฝ่ายบริหาร</li>
                </ul>
                <label><input type="radio" name="q3-3" value="ใช่" onchange="updateResult()" /> ใช่</label>
                <label><input type="radio" name="q3-3" value="ไม่ใช่" onchange="updateResult()" /> ไม่ใช่</label>
            </div>
        </div>
        <div class="section-divider hidden" id="section-divider"></div>
    </div>
    <div class="result">
        <h1>แสดงผล</h1>
        <div id="result-content">
            <!-- Results will be displayed here -->
        </div>
    </div>
</div>

<script>
    function updateResult() {
        // Get the values from the inputs
        const date = document.getElementById('date').value;
        const time = document.getElementById('time').value;
        const systemA = document.getElementById('systemA').checked ? 'ระบบ A' : '';
        const systemB = document.getElementById('systemB').checked ? 'ระบบ B' : '';
        const systemC = document.getElementById('systemC').checked ? 'ระบบ C' : '';
        const systemD = document.getElementById('systemD').checked ? 'ระบบ D' : '';
        const bothAB = document.getElementById('bothAB').checked ? 'ทั้งข้อ ก และ ข' : '';

        // Check if all required inputs are selected
        const isDateAndTimeFilled = date !== '' && time !== '';
        const isAnySystemChecked = document.querySelector('.tool input[type="checkbox"]:checked') !== null;

        if (!isDateAndTimeFilled || !isAnySystemChecked) {
            document.getElementById('result-content').innerHTML = '';
            document.getElementById('question3').classList.add('hidden');
            document.getElementById('question3-2').classList.add('hidden');
            document.getElementById('question3-3').classList.add('hidden');
            document.getElementById('section-divider').classList.add('hidden');
            return;
        }

        // Determine result content
        let resultContent = `
            <p>1. ระบุวันที่และเวลา: ${date} ${time}</p>
            <p>2. เหตุการณ์ที่เกิดขึ้น(อาจ)ส่งผลกระทบต่อบริการ: ${[systemA, systemB, systemC, systemD, bothAB].filter(Boolean).join(', ')}</p>
        `;

        const question3 = document.getElementById('question3');
        const question3_2 = document.getElementById('question3-2');
        const question3_3 = document.getElementById('question3-3');
        const sectionDivider = document.getElementById('section-divider');

        if (document.getElementById('systemD').checked && !document.getElementById('systemA').checked && !document.getElementById('systemB').checked && !document.getElementById('systemC').checked) {
            resultContent += `<p>ไม่เป็นเหตุการณ์ด้านความปลอดภัยภาคบังคับ สิ้นสุดการพิจารณา ให้ดำเนินการต่อไปตาม Difficulties <a href="#" onclick="showMoreInfo()">แสดงข้อมูลเพิ่มเติม</a></p>`;
            question3.classList.add('hidden');
            sectionDivider.classList.remove('hidden');
            disableInputs(true);
        } else {
            question3.classList.remove('hidden');
            sectionDivider.classList.add('hidden');
            disableInputs(false);
        }

        // Update results for question 3.1
        const q3_1_value = document.querySelector('input[name="q3-1"]:checked');
        if (q3_1_value) {
            resultContent += `<p>3.1 พิจารณาลักษณะเหตุตามตาราง Mandatory แล้ว <a href="#" onclick="showMoreInfo()">แสดงข้อมูลเพิ่มเติม</a> และพบว่า เป็นเหตุการณ์ตามตารางที่กำหนด: ${q3_1_value.value}</p>`;
            if (q3_1_value.value === "ใช่") {
                resultContent += `<p>เป็นเหตุการณ์ด้านความปลอดภัยภาคบังคับ สิ้นสุดการพิจารณา ให้ประสานงาน คป.มป. และงานวิชาการ เพื่อ <a href="#">แสดงข้อมูลเพิ่มเติม</a></p>`;
                question3_2.classList.add('hidden');
                question3_3.classList.add('hidden');
                sectionDivider.classList.remove('hidden');
                disableInputs(true);
            } else {
                question3_2.classList.remove('hidden');
                sectionDivider.classList.add('hidden');
            }
        } else {
            question3_2.classList.add('hidden');
            question3_3.classList.add('hidden');
        }

        // Update results for question 3.2
        const q3_2_value = document.querySelector('input[name="q3-2"]:checked');
        if (q3_2_value) {
            resultContent += `<p>3.2 เกิดจาก "เหตุที่ระบบ/อุปกรณ์ขัดข้องโดยทันที ไม่ได้วางแผน และ ส่งผลให้บริการหยุดชะงักหรือขาดหายไป": ${q3_2_value.value}</p>`;
            if (q3_2_value.value === "ใช่" || q3_2_value.value === "ยังไม่ทราบ/ไม่แน่ใจ") {
                resultContent += `<p>(อาจ)เป็นเหตุการณ์ด้านความปลอดภัยภาคบังคับ สิ้นสุดการพิจารณา ให้ประสานงาน คป.มป. และงานวิชาการ เพื่อ <a href="#">แสดงข้อมูลเพิ่มเติม</a></p>`;
                question3_3.classList.add('hidden');
                sectionDivider.classList.remove('hidden');
                disableInputs(true);
            } else {
                question3_3.classList.remove('hidden');
            }
        } else {
            question3_3.classList.add('hidden');
        }

        // Update results for question 3.3
        const q3_3_value = document.querySelector('input[name="q3-3"]:checked');
        if (q3_3_value) {
            resultContent += `<p>3.3 เหตุการณ์นี้มีลักษณะตามกลุ่มนี้ ข้อใด ข้อหนึ่งหรือไม่: ${q3_3_value.value}</p>`;
            if (q3_3_value.value === "ใช่") {
                resultContent += `<p>(อาจ)เป็นเหตุการณ์ด้านความปลอดภัยภาคบังคับ สิ้นสุดการพิจารณา ให้ประสานงาน คป.มป. และงานวิชาการ เพื่อ <a href="#">แสดงข้อมูลเพิ่มเติม</a></p>`;
                sectionDivider.classList.remove('hidden');
                disableInputs(true);
            } else {
                resultContent += `<p>ไม่เป็นเหตุการณ์ด้านความปลอดภัยภาคบังคับ สิ้นสุดการพิจารณา ให้ดำเนินการต่อไปตาม Difficulties <a href="#">แสดงข้อมูลเพิ่มเติม</a>. นอกจากนี้ ให้พิจารณาหากต้องดำเนินการแจ้งเปลี่ยนแปลงการให้บริการ</p>`;
                sectionDivider.classList.remove('hidden');
                disableInputs(false);
            }
        }

        // Display the result content only if questions 1 and 2 are completed
        if (isDateAndTimeFilled && isAnySystemChecked) {
            document.getElementById('result-content').innerHTML = resultContent;
        }
    }

    function showMoreInfo() {
        alert("แสดงข้อมูลเพิ่มเติมเกี่ยวกับการพิจารณาลักษณะเหตุตามตาราง Mandatory");
    }

    function disableInputs(disable) {
        const inputs = document.querySelectorAll('.tool input');
        inputs.forEach(input => {
            input.disabled = disable;
            if (disable) {
                input.parentElement.classList.add('disabled');
            } else {
                input.parentElement.classList.remove('disabled');
            }
        });
    }

    function resetForm() {
        document.getElementById('date').value = '';
        document.getElementById('time').value = '';
        document.getElementById('systemA').checked = false;
        document.getElementById('systemB').checked = false;
        document.getElementById('systemC').checked = false;
        document.getElementById('systemD').checked = false;
        document.getElementById('bothAB').checked = false;
        document.querySelectorAll('input[name="q3-1"]').forEach(r => r.checked = false);
        document.querySelectorAll('input[name="q3-2"]').forEach(r => r.checked = false);
        document.querySelectorAll('input[name="q3-3"]').forEach(r => r.checked = false);

        // Reset visibility of questions and result
        document.getElementById('question3').classList.add('hidden');
        document.getElementById('question3-2').classList.add('hidden');
        document.getElementById('question3-3').classList.add('hidden');
        document.getElementById('section-divider').classList.add('hidden');
        document.getElementById('result-content').innerHTML = '';

        // Enable all inputs
        disableInputs(false);
    }
</script>

</body>
</html>
